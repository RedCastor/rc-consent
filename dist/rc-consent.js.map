{"version":3,"sources":["rc-consent.js"],"names":["rcc","hasInitialised","utils","escapeRegExp","str","replace","hasClass","element","selector","s","nodeType","className","indexOf","addClass","removeClass","regex","RegExp","this","interpolateString","callback","marker","matches","arguments","getCookie","name","value","document","cookie","parts","split","length","undefined","pop","shift","val_obj","JSON","parse","decodeURIComponent","e","setCookie","expiryDays","domain","path","secure","exdate","Date","setDate","getDate","isPlainObject","stringify","encodeURIComponent","toUTCString","push","join","deepExtend","target","source","prop","hasOwnProperty","throttle","limit","wait","apply","setTimeout","hash","i","chr","len","charCodeAt","normaliseHex","hex","substr","getContrast","r","parseInt","g","b","yiq","getLuminance","num","amt","R","B","G","newColour","toString","slice","isMobile","test","navigator","userAgent","obj","constructor","Object","traverseDOMPath","elem","parentNode","util","providers","cacheStatus","defaultProvider","id","trackingId","category","onInitialise","status","onAllow","onRevoke","onStatusChange","new_status","old_status","defaultOptions","days","categories","setConsent","event","args","type","mergeDefaultStatus","initialise","options","window","addEventListener","defaultStatus","keys","i_cat","splice","concat","getStatus","call","addProvider","provider","getProviders","Element","HTMLDocument","elems_input","querySelectorAll","i_el","checked","setStatus","is_status_change","curent_value","value_hash","getDefaultStatus","default_value","cookie_hash","clearStatus","cat_status","hasConsented","setForm"],"mappings":"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","file":"rc-consent.js","sourcesContent":["/**\r\n * RC Consent\r\n *\r\n * Inspared by https://github.com/insites/cookieconsent\r\n */\r\n(function(rcc) {\r\n    \"use strict\";\r\n\r\n    //Prevent run twice\r\n    if (rcc.hasInitialised) {\r\n        return;\r\n    }\r\n\r\n    var utils = {\r\n        // https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n        escapeRegExp: function(str) {\r\n            return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n        },\r\n        hasClass: function(element, selector) {\r\n            var s = ' ';\r\n            return (\r\n                element.nodeType === 1 &&\r\n                (s + element.className + s)\r\n                    .replace(/[\\n\\t]/g, s)\r\n                    .indexOf(s + selector + s) >= 0\r\n            );\r\n        },\r\n        addClass: function(element, className) {\r\n            element.className += ' ' + className;\r\n        },\r\n        removeClass: function(element, className) {\r\n            var regex = new RegExp('\\\\b' + this.escapeRegExp(className) + '\\\\b');\r\n            element.className = element.className.replace(regex, '');\r\n        },\r\n        interpolateString: function(str, callback) {\r\n            var marker = /{{([a-z][a-z0-9\\-_]*)}}/gi;\r\n            return str.replace(marker, function(matches) {\r\n                return callback(arguments[1]) || '';\r\n            });\r\n        },\r\n        getCookie: function(name) {\r\n            var value = '; ' + document.cookie;\r\n            var parts = value.split('; ' + name + '=');\r\n\r\n            value = parts.length < 2 ? undefined : parts.pop().split(';').shift();\r\n\r\n            try {\r\n                var val_obj = JSON.parse(decodeURIComponent(value));\r\n\r\n                value = val_obj;\r\n            }\r\n            catch (e) {}\r\n\r\n            return value;\r\n        },\r\n        setCookie: function(name, value, expiryDays, domain, path, secure) {\r\n            var exdate = new Date();\r\n            exdate.setDate(exdate.getDate() + (expiryDays || 365));\r\n\r\n            if (this.isPlainObject(value)) {\r\n                value = JSON.stringify(value);\r\n            }\r\n\r\n            value = encodeURIComponent(value);\r\n\r\n            var cookie = [\r\n                name + '=' + value,\r\n                'expires=' + exdate.toUTCString(),\r\n                'path=' + (path || '/')\r\n            ];\r\n\r\n            if (domain) {\r\n                cookie.push('domain=' + domain);\r\n            }\r\n            if (secure) {\r\n                cookie.push('secure');\r\n            }\r\n\r\n            document.cookie = cookie.join(';');\r\n        },\r\n        // only used for extending the initial options\r\n        deepExtend: function(target, source) {\r\n            for (var prop in source) {\r\n                if (source.hasOwnProperty(prop)) {\r\n                    if (\r\n                        prop in target &&\r\n                        this.isPlainObject(target[prop]) &&\r\n                        this.isPlainObject(source[prop])\r\n                    ) {\r\n                        this.deepExtend(target[prop], source[prop]);\r\n                    } else {\r\n                        target[prop] = source[prop];\r\n                    }\r\n                }\r\n            }\r\n            return target;\r\n        },\r\n        // only used for throttling the 'mousemove' event (used for animating the revoke button when `animateRevokable` is true)\r\n        throttle: function(callback, limit) {\r\n            var wait = false;\r\n            return function() {\r\n                if (!wait) {\r\n                    callback.apply(this, arguments);\r\n                    wait = true;\r\n                    setTimeout(function() {\r\n                        wait = false;\r\n                    }, limit);\r\n                }\r\n            };\r\n        },\r\n        // only used for hashing json objects (used for hash status objects)\r\n        hash: function(str) {\r\n            var hash = 0,\r\n                i,\r\n                chr,\r\n                len;\r\n            if (str.length === 0) {\r\n                return hash;\r\n            }\r\n\r\n            for (i = 0, len = str.length; i < len; ++i) {\r\n\r\n                chr = str.charCodeAt(i);\r\n                hash = (hash << 5) - hash + chr;\r\n                hash |= 0;\r\n            }\r\n\r\n            return hash & 0xfffffff; //Always positive\r\n        },\r\n        normaliseHex: function(hex) {\r\n            if (hex[0] === '#') {\r\n                hex = hex.substr(1);\r\n            }\r\n            if (hex.length === 3) {\r\n                hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\r\n            }\r\n            return hex;\r\n        },\r\n        // used to get text colors if not set\r\n        getContrast: function(hex) {\r\n            hex = this.normaliseHex(hex);\r\n            var r = parseInt(hex.substr(0, 2), 16);\r\n            var g = parseInt(hex.substr(2, 2), 16);\r\n            var b = parseInt(hex.substr(4, 2), 16);\r\n            var yiq = (r * 299 + g * 587 + b * 114) / 1000;\r\n            return yiq >= 128 ? '#000' : '#fff';\r\n        },\r\n        // used to change color on highlight\r\n        getLuminance: function(hex) {\r\n            var num = parseInt(this.normaliseHex(hex), 16),\r\n                amt = 38,\r\n                R = (num >> 16) + amt,\r\n                B = ((num >> 8) & 0x00ff) + amt,\r\n                G = (num & 0x0000ff) + amt;\r\n            var newColour = (\r\n                0x1000000 +\r\n                (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 +\r\n                (B < 255 ? (B < 1 ? 0 : B) : 255) * 0x100 +\r\n                (G < 255 ? (G < 1 ? 0 : G) : 255)\r\n            )\r\n                .toString(16)\r\n                .slice(1);\r\n            return '#' + newColour;\r\n        },\r\n        isMobile: function() {\r\n            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\r\n                navigator.userAgent\r\n            );\r\n        },\r\n        isPlainObject: function(obj) {\r\n            // The code \"typeof obj === 'object' && obj !== null\" allows Array objects\r\n            return (\r\n                typeof obj === 'object' && obj !== null && obj.constructor === Object\r\n            );\r\n        },\r\n        traverseDOMPath: function(elem, className) {\r\n            if (!elem || !elem.parentNode) {\r\n                return null;\r\n            }\r\n\r\n            if (util.hasClass(elem, className)) {\r\n                return elem;\r\n            }\r\n\r\n            return this.traverseDOMPath(elem.parentNode, className);\r\n        }\r\n    };\r\n\r\n    var providers = [];\r\n    var cacheStatus = {};\r\n\r\n    var defaultProvider = {\r\n        id: null,\r\n        trackingId: null,\r\n        category: 'analytics',\r\n        onInitialise: function(rcc, status) {},\r\n        onAllow: function(rcc) {},\r\n        onRevoke: function(rcc) {},\r\n        onStatusChange: function(rcc, new_status, old_status) {}\r\n    };\r\n\r\n    var defaultOptions = {\r\n        cookie: {\r\n            name: 'rcc_consent',\r\n            domain: '',\r\n            path: '/',\r\n            days: 7\r\n        },\r\n        categories: [\r\n            'analytics'\r\n        ]\r\n    };\r\n\r\n    /**\r\n     * Set Consent for event\r\n     *\r\n     * @param event\r\n     * @param args\r\n     */\r\n    var setConsent = function( event, args ) {\r\n\r\n        if (!args && event.type === 'submit') {\r\n\r\n            rcc.setConsent(event.target);\r\n        }\r\n        else {\r\n            rcc.setConsent(args);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * Merge default status target with source not extend target\r\n     * @param target\r\n     * @param source\r\n     * @returns {*}\r\n     */\r\n    function mergeDefaultStatus (target, source) {\r\n\r\n        if (utils.isPlainObject(source)) {\r\n\r\n            for (var prop in target) {\r\n                if (target.hasOwnProperty(prop)) {\r\n\r\n                    if (source[prop] === true || source[prop] === false) {\r\n                        target[prop] = source[prop];\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return target;\r\n    }\r\n\r\n\r\n    rcc = {\r\n        initialise: function(options) {\r\n\r\n            //Init options\r\n            utils.deepExtend((this.options = {}), defaultOptions);\r\n\r\n            if (utils.isPlainObject(options)) {\r\n                utils.deepExtend(this.options, options);\r\n            }\r\n\r\n            //Add Event Listner for set consent\r\n            window.document.addEventListener('rccSetConsent', setConsent);\r\n\r\n            //Init Categories\r\n            var categories = [];\r\n            var category;\r\n\r\n            if (utils.isPlainObject(this.options.defaultStatus)) {\r\n                categories = Object.keys(this.options.defaultStatus);\r\n            }\r\n\r\n            for (var i_cat = 0; i_cat < providers.length; i_cat++) {\r\n                category = providers[i_cat].category || 'analytics';\r\n\r\n                if (categories.indexOf(category) === -1) {\r\n                    categories.push(category);\r\n                }\r\n\r\n                //Add categories from provider\r\n                if (this.options.categories.indexOf(category) >= 0) {\r\n                    this.options.categories.splice(this.options.categories.indexOf(category), 1);\r\n                }\r\n            }\r\n\r\n            //Concat default\r\n            this.options.categories = categories.concat(this.options.categories);\r\n\r\n            var status = this.getStatus();\r\n\r\n\r\n            //Initialize each provider\r\n            for (var i = 0; i < providers.length; i++) {\r\n\r\n                category = providers[i].category;\r\n\r\n                providers[i].onInitialise.call(providers[i], this, status);\r\n\r\n                if (category && status[category] === true) {\r\n                    providers[i].onAllow.call(providers[i], this);\r\n                }\r\n            }\r\n\r\n            cacheStatus = status;\r\n        },\r\n        addProvider: function (options) {\r\n\r\n            if (!options.id || options.id === '') {\r\n                return false;\r\n            }\r\n\r\n            var provider = {};\r\n\r\n            utils.deepExtend(provider, defaultProvider);\r\n\r\n            if (utils.isPlainObject(options)) {\r\n                utils.deepExtend(provider, options);\r\n            }\r\n\r\n            providers.push(provider);\r\n\r\n            return true;\r\n        },\r\n        getProviders: function() {\r\n            return providers;\r\n        },\r\n        setConsent: function( args  ) {\r\n\r\n            //If args is element setup args with form values\r\n            if (!!(args instanceof Element || args instanceof HTMLDocument)) {\r\n\r\n                var element = args;\r\n\r\n                var elems_input = element.querySelectorAll('input[name]');\r\n\r\n                args = undefined;\r\n\r\n                if (elems_input.length) {\r\n\r\n                    args = {};\r\n\r\n                    for (var i_el = 0; i_el < elems_input.length; i_el++) {\r\n\r\n                        if(elems_input[i_el].type === 'checkbox' && rcc.options.categories.indexOf(elems_input[i_el].name) >= 0) {\r\n                            args[elems_input[i_el].name] = elems_input[i_el].checked;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            this.setStatus(args);\r\n\r\n            var status = this.getStatus();\r\n            var is_status_change = false;\r\n\r\n            //Status change\r\n            if (JSON.stringify(status) !== JSON.stringify(cacheStatus)) {\r\n                is_status_change = true;\r\n            }\r\n\r\n            //Call onChange revoke or allow for each provider\r\n            for (var i = 0; i < providers.length; i++) {\r\n                var category = providers[i].category;\r\n\r\n                if (is_status_change) {\r\n                    providers[i].onStatusChange.call(providers[i], this, status, cacheStatus);\r\n                }\r\n\r\n                if (status[category] !== cacheStatus[category]) {\r\n\r\n                    if (!status[category]) {\r\n                        providers[i].onRevoke.call(providers[i], this);\r\n                    }\r\n                    else {\r\n                        providers[i].onAllow.call(providers[i], this);\r\n                    }\r\n                }\r\n            }\r\n\r\n            cacheStatus = status;\r\n        },\r\n        getStatus: function() {\r\n\r\n            var cookie = rcc.options.cookie;\r\n            var curent_value = utils.getCookie(cookie.name);\r\n            var value_hash = utils.getCookie(cookie.name + '_hash');\r\n            var value = this.getDefaultStatus();\r\n\r\n            mergeDefaultStatus(value, curent_value);\r\n\r\n            //Update cookie if current value not same as default value merge with current value.\r\n            if (JSON.stringify(curent_value) !== JSON.stringify(value)) {\r\n\r\n                utils.setCookie(cookie.name, value, 0, cookie.domain, cookie.path);\r\n            }\r\n\r\n            //Remove hash not same as cookie status\r\n            if (value_hash !== utils.hash(JSON.stringify(value))) {\r\n\r\n                utils.setCookie(this.options.cookie.name + '_hash', '', -1, cookie.domain, cookie.path);\r\n            }\r\n\r\n            return value;\r\n        },\r\n        setStatus: function( value ) {\r\n\r\n            var cookie = this.options.cookie;\r\n            var default_value = this.getDefaultStatus();\r\n\r\n            if (!utils.isPlainObject(value)) {\r\n\r\n                value = utils.getCookie(cookie.name);\r\n            }\r\n\r\n            value = mergeDefaultStatus(default_value, value);\r\n\r\n            var cookie_hash = utils.hash(JSON.stringify(value));\r\n\r\n            utils.setCookie(cookie.name, value, 0, cookie.domain, cookie.path);\r\n            utils.setCookie(cookie.name + '_hash', cookie_hash, cookie.days, cookie.domain, cookie.path);\r\n        },\r\n        clearStatus: function() {\r\n\r\n            var cookie = this.options.cookie;\r\n\r\n            utils.setCookie(cookie.name, '', -1, cookie.domain, cookie.path);\r\n            utils.setCookie(cookie.name + '_hash', '', -1, cookie.domain, cookie.path);\r\n\r\n            cacheStatus = this.getDefaultStatus();\r\n        },\r\n        getDefaultStatus: function() {\r\n\r\n            var default_value = utils.isPlainObject(this.options.defaultStatus) ? this.options.defaultStatus : {};\r\n            var status = {};\r\n\r\n            for (var i = 0; i < this.options.categories.length; i++) {\r\n\r\n                var cat_status = default_value[this.options.categories[i]];\r\n\r\n                status[this.options.categories[i]] = cat_status === true ? true : false;\r\n            }\r\n\r\n            return status;\r\n        },\r\n        hasConsented: function ( category ) {\r\n\r\n            var status = this.getStatus();\r\n\r\n            var value_hash = utils.getCookie(this.options.cookie.name + '_hash');\r\n\r\n            if (!value_hash) {\r\n                return false;\r\n            }\r\n            else if (!category || category === '') {\r\n                return true;\r\n            }\r\n\r\n            return !!status[category];\r\n        },\r\n        setForm: function ( element ) {\r\n\r\n            if (!!(element instanceof Element || element instanceof HTMLDocument)) {\r\n\r\n                var status = this.getStatus();\r\n                var elems_input = element.querySelectorAll('input[name]');\r\n\r\n                if (elems_input.length) {\r\n\r\n                    for (var i = 0; i < elems_input.length; i++) {\r\n\r\n                        if(elems_input[i].type === 'checkbox' && rcc.options.categories.indexOf(elems_input[i].name) >= 0) {\r\n                            elems_input[i].checked = (status[elems_input[i].name] === true ? true : false);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    //Prevent run twice\r\n    rcc.hasInitialised = true;\r\n\r\n    window.rcc = rcc;\r\n})(window, window.rcc || {});"],"sourceRoot":"dist"}